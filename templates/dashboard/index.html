{% load widget_tweaks %} {% load static %}  {% include 'base/dashboard-head.html' %}
{% include 'base/sidebar-left.html' %}
<div class="page-content">
<!-- Main content -->
  <div class="content-wrapper">
    <!-- Inner content -->
    <div class="content-inner">
      <!-- Content area -->
      <div class="content">
        <div class="chart-container">
          <div class="row">
            <div class="col-md-9">
                  <div class="card" style="height: 492px;">
                    <div class="card-header">
                      <button id="main-dash-y" onClick="updateChck('Y');">Year</button>
                      <button id="main-dash-m" onClick="updateChck('M');">Month</button>
                      <button id="main-dash-d" onClick="updateChck('D');">Day</button>
                    </div>
                    <div class="card-body">
                  <div class="chart has-fixed-height" id="columns_basic" style="margin-top: 24px;"></div>
                </div>
              </div>
    
                </div>
                <div class="col-md-3">
                  <div class="card">
                    <div class="card-body">
                  <div class="row">
                  <div class="col-md-12">
                    <div class="card card-body bg-primary text-white has-bg-image">
                      <div class="media mb-3">
                        <div class="media-body">
                          <h6 class="font-weight-semibold mb-0">Server maintenance</h6>
                          <span class="opacity-75">Until 1st of June</span>
                        </div>
      
                        <div class="ml-3 align-self-center">
                          <i class="icon-cog3 icon-2x"></i>
                        </div>
                      </div>
      
                      <div class="progress bg-primary mb-2" style="height: 0.125rem;">
                        <div class="progress-bar bg-white" style="width: 67%">
                          <span class="sr-only">67% Complete</span>
                        </div>
                      </div>
                              
                        <div>
                          <span class="float-right">67%</span>
                          Re-indexing
                        </div>
                      </div>
                    </div>
                    <div class="col-md-12">

                      <!-- Order shipped -->
                      <div class="card card-body text-center bg-purple text-white has-bg-image">
                        <div class="svg-center position-relative" id="progress_icon_four"><svg width="84" height="84"><g transform="translate(42,42)"><path class="d3-progress-background" d="M0,42A42,42 0 1,1 0,-42A42,42 0 1,1 0,42M0,39.5A39.5,39.5 0 1,0 0,-39.5A39.5,39.5 0 1,0 0,39.5Z" style="fill: rgb(255, 255, 255); opacity: 0.1;"></path><path class="d3-progress-foreground" filter="url(#blur)" d="M6.661338147750939e-16,-40.7308237088326A1.25,1.25 0 0,1 1.2883435582822094,-41.98023547904219A42,42 0 0,1 3.9217621022559332,41.81650131244016A1.25,1.25 0 0,1 2.557509581534405,40.65045073231489L2.557509581534405,40.65045073231489A1.25,1.25 0 0,1 3.6883238818835555,39.327423853366334A39.5,39.5 0 0,0 1.2116564417177922,-39.48141193862301A1.25,1.25 0 0,1 6.661338147750939e-16,-40.7308237088326Z" style="fill: rgb(255, 255, 255); stroke: rgb(255, 255, 255);"></path><path class="d3-progress-front" d="M6.661338147750939e-16,-40.7308237088326A1.25,1.25 0 0,1 1.2883435582822094,-41.98023547904219A42,42 0 0,1 3.9217621022559332,41.81650131244016A1.25,1.25 0 0,1 2.557509581534405,40.65045073231489L2.557509581534405,40.65045073231489A1.25,1.25 0 0,1 3.6883238818835555,39.327423853366334A39.5,39.5 0 0,0 1.2116564417177922,-39.48141193862301A1.25,1.25 0 0,1 6.661338147750939e-16,-40.7308237088326Z" style="fill: rgb(255, 255, 255); fill-opacity: 1;"></path></g></svg><i class="icon-truck counter-icon" style="color: rgb(255, 255, 255); top: 26px;"></i></div>
                        <h2 class="pt-1 mt-2 mb-1">49%</h2>

                        Orders shipped
                        <div class="font-size-sm opacity-75">92 orders pending</div>
                      </div>
                      <!-- /orders shipped -->

                    </div>
                  </div>
                </div>
              </div>
                </div>
              </div>
        </div>

        <div class="row">
          <div class="col-sm-6 col-xl-3">
            <div class="card card-body bg-primary text-white has-bg-image">
              <div class="media">
                <div class="media-body">
                  <h3 class="mb-0" id="br">00</h3>
                  <span class="text-uppercase font-size-xs">total branches</span>
                </div>

                <div class="ml-3 align-self-center">
                  <i class="icon-bubbles4 icon-3x opacity-75"></i>
                </div>
              </div>
            </div>
          </div>

          <div class="col-sm-6 col-xl-3">
            <div class="card card-body bg-danger text-white has-bg-image">
              <div class="media">
                <div class="media-body">
                  <h3 class="mb-0" id="dept">00</h3>
                  <span class="text-uppercase font-size-xs">total departments</span>
                </div>

                <div class="ml-3 align-self-center">
                  <i class="icon-bag icon-3x opacity-75"></i>
                </div>
              </div>
            </div>
          </div>

          <div class="col-sm-6 col-xl-3">
            <div class="card card-body bg-success text-white has-bg-image">
              <div class="media">
                <div class="mr-3 align-self-center">
                  <i class="icon-pointer icon-3x opacity-75"></i>
                </div>

                <div class="media-body text-right">
                  <h3 class="mb-0" id="des">00</h3>
                  <span class="text-uppercase font-size-xs">total designations</span>
                </div>
              </div>
            </div>
          </div>

          <div class="col-sm-6 col-xl-3">
            <div class="card card-body bg-indigo text-white has-bg-image">
              <div class="media">
                <div class="mr-3 align-self-center">
                  <i class="icon-enter6 icon-3x opacity-75"></i>
                </div>

                <div class="media-body text-right">
                  <h3 class="mb-0" id="emp">00</h3>
                  <span class="text-uppercase font-size-xs">total employees</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- /content area -->
    </div>
    <!-- /inner content -->
  </div>
  <!-- Page content -->
  </div>
<script>
  console.log('jlk')
  async function fetchMainHeader() {
    const response = await fetch('http://127.0.0.1:8000/dashboard-headers');
    // waits until the request completes...
    response.json().then((res) => {
      let data = JSON.parse(res)
      document.getElementById('emp').innerHTML = data["emp_count"]
      document.getElementById('des').innerHTML = data["des_count"]
      document.getElementById('dept').innerHTML = data["dept_count"]
      document.getElementById('br').innerHTML = data["branch_count"]


    });
  }
  document.addEventListener('DOMContentLoaded', function () {
    console.log('jlk')
    fetchMainHeader();
  });

</script>
</html>
